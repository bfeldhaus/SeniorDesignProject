import smtplib, random

def send_otp(receiver_email):
    otp = str(random.randint(100000, 999999))  # 6-digit OTP
    message = f"Subject: Your OTP Code\n\nYour verification code is: {otp}"

    # Connect to Gmail SMTP (use App Password, not your real password!)

    server = smtplib.SMTP("smtp.gmail.com", 587)
    server.starttls()
    server.login("your_email@gmail.com", "your_app_password")
    server.sendmail("your_email@gmail.com", receiver_email, message)
    server.quit()

    return otp  # Save this in DB or cache for later verification

# Example usage

stored_otp = send_otp("user@example.com")
user_code = input("Enter the OTP sent to your email: ")

if user_code == stored_otp:
    print("Login success (OTP verified)")
else:
    print("Invalid OTP, access denied")
