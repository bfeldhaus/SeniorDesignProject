using System;
using System.Net;
using System.Net.Mail;

class Program
{
    static string SendOtp(string receiverEmail)
    {
        // Generate 6-digit OTP
        Random random = new Random();
        string otp = random.Next(100000, 999999).ToString();

        // Configure SMTP client (Gmail example)
        SmtpClient client = new SmtpClient("smtp.gmail.com", 587)
        {
            EnableSsl = true,
            Credentials = new NetworkCredential("your_email@gmail.com", "your_app_password")
        };

        // Create the email message
        MailMessage mail = new MailMessage();
        mail.From = new MailAddress("your_email@gmail.com");
        mail.To.Add(receiverEmail);
        mail.Subject = "Your OTP Code";
        mail.Body = $"Your verification code is: {otp}";

        try
        {
            client.Send(mail);
            Console.WriteLine("OTP sent successfully!");
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error sending email: " + ex.Message);
        }

        return otp; // Save this for later verification
    }

    static void Main()
    {
        string storedOtp = SendOtp("user@example.com");

        Console.Write("Enter the OTP sent to your email: ");
        string userInput = Console.ReadLine();

        if (userInput == storedOtp)
        {
            Console.WriteLine("Login success (OTP verified)");
        }
        else
        {
            Console.WriteLine("Invalid OTP, access denied");
        }
    }
}
